{
  "tech_stack": {
    "frontend": {
      "web": "React (Next.js)",
      "mobile": "React Native"
    },
    "backend": {
      "language": "Node.js",
      "framework": "Express.js",
      "orm": "Prisma",
      "authentication": "JWT (JSON Web Tokens), OAuth 2.0 (for Google Sign-In)"
    },
    "database": {
      "primary": "PostgreSQL",
      "caching": "Redis (optional, for performance optimization)"
    },
    "devops": {
      "ci_cd": "GitHub Actions / GitLab CI",
      "containerization": "Docker",
      "orchestration": "Kubernetes (optional, for scalability)",
      "cloud_provider": "AWS / Google Cloud / Azure",
      "monitoring": "Prometheus + Grafana / Datadog",
      "logging": "ELK Stack (Elasticsearch, Logstash, Kibana) / CloudWatch Logs"
    }
  },
  "system_diagram": {
    "format": "mermaid",
    "code": "graph TD\n    A[Client Apps (Web, iOS, Android)] --> B(Load Balancer);\n    B --> C1[API Gateway];\n    B --> C2[API Gateway];\n    C1 --> D1(Authentication Service);\n    C1 --> D2(User Service);\n    C1 --> D3(Calendar Service);\n    C1 --> D4(Task Service);\n    C1 --> D5(Reward Service);\n    C1 --> D6(Integration Service);\n    C2 --> D1;\n    C2 --> D2;\n    C2 --> D3;\n    C2 --> D4;\n    C2 --> D5;\n    C2 --> D6;\n    D1 --> E(Auth Database - PostgreSQL);\n    D2 --> F(User Database - PostgreSQL);\n    D3 --> G(Calendar Database - PostgreSQL);\n    D4 --> H(Task Database - PostgreSQL);\n    D5 --> I(Reward Database - PostgreSQL);\n    D6 --> J(External APIs - Google Calendar);\n    D6 --> K(Integration DB - PostgreSQL);\n    subgraph Backend Services\n        D1;\n        D2;\n        D3;\n        D4;\n        D5;\n        D6;\n    end\n    subgraph Databases\n        E;\n        F;\n        G;\n        H;\n        I;\n        K;\n    end\n    Client Apps -->|HTTPS| B;"
  },
  "api_design_principles": [
    {
      "principle": "RESTful Design",
      "description": "Utilize standard HTTP methods (GET, POST, PUT, DELETE) and resource-based URLs. Ensure clear and consistent naming conventions."
    },
    {
      "principle": "Statelessness",
      "description": "Each request from a client to the server must contain all the information needed to understand and complete the request. The server should not store any client context between requests."
    },
    {
      "principle": "JSON for Data Exchange",
      "description": "Use JSON as the primary format for request and response bodies."
    },
    {
      "principle": "Versioning",
      "description": "Implement API versioning (e.g., /api/v1/users) to allow for future modifications without breaking existing clients."
    },
    {
      "principle": "Authentication and Authorization",
      "description": "Secure endpoints using JWT for authentication. Implement role-based authorization to control access to resources."
    },
    {
      "principle": "Consistent Error Handling",
      "description": "Provide clear and informative error messages in a standardized JSON format, including appropriate HTTP status codes."
    },
    {
      "principle": "Pagination and Filtering",
      "description": "Implement pagination for lists of resources and allow filtering and sorting where applicable to improve performance and usability."
    }
  ],
  "data_model": {
    "schema": [
      {
        "table": "users",
        "columns": [
          {
            "name": "user_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "email",
            "type": "VARCHAR(255)",
            "unique": true,
            "not_null": true
          },
          {
            "name": "password_hash",
            "type": "VARCHAR(255)",
            "not_null": true
          },
          {
            "name": "google_id",
            "type": "VARCHAR(255)",
            "unique": true,
            "nullable": true
          },
          {
            "name": "first_name",
            "type": "VARCHAR(100)",
            "nullable": true
          },
          {
            "name": "last_name",
            "type": "VARCHAR(100)",
            "nullable": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          },
          {
            "name": "updated_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "families",
        "columns": [
          {
            "name": "family_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "family_name",
            "type": "VARCHAR(100)",
            "nullable": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "family_members",
        "columns": [
          {
            "name": "family_member_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "family_id",
            "type": "UUID",
            "foreign_key": "families(family_id)",
            "not_null": true
          },
          {
            "name": "user_id",
            "type": "UUID",
            "foreign_key": "users(user_id)",
            "not_null": true,
            "unique": true
          },
          {
            "name": "role",
            "type": "VARCHAR(50)",
            "default": "'member'",
            "enum": [
              "parent",
              "child"
            ]
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "children_profiles",
        "columns": [
          {
            "name": "child_profile_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "family_id",
            "type": "UUID",
            "foreign_key": "families(family_id)",
            "not_null": true
          },
          {
            "name": "name",
            "type": "VARCHAR(100)",
            "not_null": true
          },
          {
            "name": "age",
            "type": "INTEGER",
            "nullable": true
          },
          {
            "name": "profile_picture_url",
            "type": "VARCHAR(255)",
            "nullable": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "events",
        "columns": [
          {
            "name": "event_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "family_id",
            "type": "UUID",
            "foreign_key": "families(family_id)",
            "not_null": true
          },
          {
            "name": "title",
            "type": "VARCHAR(255)",
            "not_null": true
          },
          {
            "name": "start_time",
            "type": "TIMESTAMP WITH TIME ZONE",
            "not_null": true
          },
          {
            "name": "end_time",
            "type": "TIMESTAMP WITH TIME ZONE",
            "not_null": true
          },
          {
            "name": "location",
            "type": "VARCHAR(255)",
            "nullable": true
          },
          {
            "name": "notes",
            "type": "TEXT",
            "nullable": true
          },
          {
            "name": "activity_type",
            "type": "VARCHAR(100)",
            "nullable": true
          },
          {
            "name": "recurrence_rule",
            "type": "VARCHAR(100)",
            "nullable": true
          },
          {
            "name": "recurrence_end_date",
            "type": "DATE",
            "nullable": true
          },
          {
            "name": "created_by_user_id",
            "type": "UUID",
            "foreign_key": "users(user_id)",
            "not_null": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          },
          {
            "name": "updated_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "event_assignments",
        "columns": [
          {
            "name": "event_assignment_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "event_id",
            "type": "UUID",
            "foreign_key": "events(event_id)",
            "not_null": true
          },
          {
            "name": "child_profile_id",
            "type": "UUID",
            "foreign_key": "children_profiles(child_profile_id)",
            "not_null": true
          },
          {
            "name": "assigned_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "tasks",
        "columns": [
          {
            "name": "task_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "family_id",
            "type": "UUID",
            "foreign_key": "families(family_id)",
            "not_null": true
          },
          {
            "name": "title",
            "type": "VARCHAR(255)",
            "not_null": true
          },
          {
            "name": "description",
            "type": "TEXT",
            "nullable": true
          },
          {
            "name": "due_date",
            "type": "TIMESTAMP WITH TIME ZONE",
            "nullable": true
          },
          {
            "name": "recurrence_rule",
            "type": "VARCHAR(100)",
            "nullable": true
          },
          {
            "name": "recurrence_end_date",
            "type": "DATE",
            "nullable": true
          },
          {
            "name": "created_by_user_id",
            "type": "UUID",
            "foreign_key": "users(user_id)",
            "not_null": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          },
          {
            "name": "updated_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "task_assignments",
        "columns": [
          {
            "name": "task_assignment_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "task_id",
            "type": "UUID",
            "foreign_key": "tasks(task_id)",
            "not_null": true
          },
          {
            "name": "child_profile_id",
            "type": "UUID",
            "foreign_key": "children_profiles(child_profile_id)",
            "not_null": true
          },
          {
            "name": "status",
            "type": "VARCHAR(50)",
            "default": "'pending'",
            "enum": [
              "pending",
              "completed",
              "approved",
              "rejected"
            ]
          },
          {
            "name": "completed_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "nullable": true
          },
          {
            "name": "approved_rejected_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "nullable": true
          },
          {
            "name": "approved_rejected_by_user_id",
            "type": "UUID",
            "foreign_key": "users(user_id)",
            "nullable": true
          }
        ]
      },
      {
        "table": "rewards",
        "columns": [
          {
            "name": "reward_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "family_id",
            "type": "UUID",
            "foreign_key": "families(family_id)",
            "not_null": true
          },
          {
            "name": "name",
            "type": "VARCHAR(100)",
            "not_null": true
          },
          {
            "name": "points_value",
            "type": "INTEGER",
            "not_null": true,
            "default": 0
          },
          {
            "name": "is_custom",
            "type": "BOOLEAN",
            "default": false
          },
          {
            "name": "created_by_user_id",
            "type": "UUID",
            "foreign_key": "users(user_id)",
            "not_null": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "task_reward_associations",
        "columns": [
          {
            "name": "association_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "task_id",
            "type": "UUID",
            "foreign_key": "tasks(task_id)",
            "not_null": true
          },
          {
            "name": "reward_id",
            "type": "UUID",
            "foreign_key": "rewards(reward_id)",
            "not_null": true
          }
        ]
      },
      {
        "table": "child_rewards_earned",
        "columns": [
          {
            "name": "earned_reward_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "child_profile_id",
            "type": "UUID",
            "foreign_key": "children_profiles(child_profile_id)",
            "not_null": true
          },
          {
            "name": "reward_id",
            "type": "UUID",
            "foreign_key": "rewards(reward_id)",
            "not_null": true
          },
          {
            "name": "task_assignment_id",
            "type": "UUID",
            "foreign_key": "task_assignments(task_assignment_id)",
            "nullable": true
          },
          {
            "name": "points_earned",
            "type": "INTEGER",
            "not_null": true
          },
          {
            "name": "earned_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "kickstart_programs",
        "columns": [
          {
            "name": "kickstart_program_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "family_id",
            "type": "UUID",
            "foreign_key": "families(family_id)",
            "not_null": true
          },
          {
            "name": "program_title",
            "type": "VARCHAR(255)",
            "not_null": true
          },
          {
            "name": "start_date",
            "type": "DATE",
            "not_null": true
          },
          {
            "name": "duration_days",
            "type": "INTEGER",
            "default": 21
          },
          {
            "name": "created_by_user_id",
            "type": "UUID",
            "foreign_key": "users(user_id)",
            "not_null": true
          },
          {
            "name": "created_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      },
      {
        "table": "kickstart_assignments",
        "columns": [
          {
            "name": "kickstart_assignment_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "kickstart_program_id",
            "type": "UUID",
            "foreign_key": "kickstart_programs(kickstart_program_id)",
            "not_null": true
          },
          {
            "name": "child_profile_id",
            "type": "UUID",
            "foreign_key": "children_profiles(child_profile_id)",
            "not_null": true
          },
          {
            "name": "task_id",
            "type": "UUID",
            "foreign_key": "tasks(task_id)",
            "not_null": true
          },
          {
            "name": "assigned_date",
            "type": "DATE",
            "not_null": true
          },
          {
            "name": "status",
            "type": "VARCHAR(50)",
            "default": "'pending'",
            "enum": [
              "pending",
              "completed",
              "skipped"
            ]
          },
          {
            "name": "completed_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "nullable": true
          }
        ]
      },
      {
        "table": "google_calendar_syncs",
        "columns": [
          {
            "name": "sync_id",
            "type": "UUID",
            "primary_key": true,
            "default": "gen_random_uuid()"
          },
          {
            "name": "user_id",
            "type": "UUID",
            "foreign_key": "users(user_id)",
            "not_null": true,
            "unique": true
          },
          {
            "name": "access_token",
            "type": "TEXT",
            "not_null": true
          },
          {
            "name": "refresh_token",
            "type": "TEXT",
            "not_null": true
          },
          {
            "name": "expires_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "not_null": true
          },
          {
            "name": "synced_at",
            "type": "TIMESTAMP WITH TIME ZONE",
            "default": "NOW()"
          }
        ]
      }
    ]
  }
}