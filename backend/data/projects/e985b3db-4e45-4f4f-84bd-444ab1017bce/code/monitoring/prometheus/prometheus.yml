# Global configuration
global:
  scrape_interval: 15s # How frequently to scrape targets
  evaluation_interval: 15s # How frequently to evaluate rules

# Alertmanager configuration (optional)
# alert_managers:
#   - static_configs:
#       - targets: ['alertmanager:9093']

# Load rules once and periodically evaluate them according to the global 'evaluation_interval'.
rule_files:
  # - "/etc/prometheus/rules/*.yml"

# Scrape configurations
scrape_configs:
  # Scrape Prometheus itself
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Scrape Grafana
  - job_name: 'grafana'
    static_configs:
      - targets: ['grafana:3000']
        # Note: Grafana itself doesn't expose Prometheus metrics by default unless configured.
        # You might need to enable the /metrics endpoint in Grafana's config.

  # Scrape Backend Application (assuming it exposes metrics via a /metrics endpoint)
  - job_name: 'backend_app'
    static_configs:
      - targets: ['backend:8000'] # Assumes backend container is named 'backend' and exposes metrics on port 8000/metrics
        # If using EC2 instances directly, use their private IP and the metrics port
        # Example: targets: ['10.0.11.10:8000'] 

  # Scrape PostgreSQL (using a postgres_exporter)
  # - job_name: 'postgres'
  #   static_configs:
  #     - targets: ['postgres_exporter:9187'] # Assumes a postgres_exporter container is running

  # Scrape Redis (using a redis_exporter)
  # - job_name: 'redis'
  #   static_configs:
  #     - targets: ['redis_exporter:9121'] # Assumes a redis_exporter container is running

  # Scrape Node Exporter (if running on host or other instances)
  # - job_name: 'node'
  #   static_configs:
  #     - targets: ['node_exporter:9100']
  #       # For multiple instances:
  #       # - targets: ['host1:9100', 'host2:9100']

# Enable alerting (optional)
# alerting:
#   alertmanagers:
#     - static_configs:
#         - targets:
#             # - alertmanager:9093
